<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trabajo - Requisitos</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      background: linear-gradient(-45deg, #111, #222, #1a1a40, #3a0ca3);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* contenedor de cada slide */
    .slide {
      position: absolute;
      inset: 0;                 /* top:0; right:0; bottom:0; left:0; */
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 1.3rem;   /* subir tamna√±o a toda la letra */
      opacity: 0;
      pointer-events: none;
      transform: translateX(100%); /* por defecto fuera a la derecha */
      transition: transform 0.8s ease, opacity 0.6s ease;
      overflow: hidden;
      padding: 40px;
      text-align: center;
      z-index: 1;
    }

    /* slide a la izquierda (prev) */
    .slide.prev {
      transform: translateX(-100%);
    }

    /* slide activo */
    .slide.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(0);
      z-index: 2;
    }

    .slide .content {
      flex: 1;
      overflow-y: auto;
      width: 100%;
    }

    .slide .footer {
      padding: 20px 0;
    }

    .slide h2 {
      font-size: 2.0em;
      margin-bottom: 18px;
      margin-top: 24px;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.7);
    }

    /* Botones principales */
    .menu-btn {
      background: linear-gradient(45deg, #ff0055, #ff6600);
      color: #fff;
      border: none;
      padding: 12px 28px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 40px;
      margin: 8px;
      box-shadow: 0px 5px 15px rgba(0,0,0,0.5);
      transition: transform 0.18s, box-shadow 0.18s;
      display: block;
    }
    .menu-btn:hover { transform: scale(1.06); box-shadow: 0px 8px 25px rgba(0,0,0,0.7); }

    /* Botones para entidades */
    .entity-btn {
      background: linear-gradient(45deg, #007bff, #00d4ff);
      color: #fff;
      border: none;
      padding: 10px 22px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 25px;
      margin: 6px;
      box-shadow: 0px 4px 12px rgba(0,0,0,0.4);
      transition: transform 0.18s, box-shadow 0.18s;
      display: block;
    }
    .entity-btn:hover { transform: scale(1.04); box-shadow: 0px 6px 20px rgba(0,0,0,0.6); }

    .requisito-detalle {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 18px;
      margin-top: 14px;
      border-radius: 12px;
      text-align: left;
    }

    .requisito-detalle h3 {
      margin-bottom: 8px;
      font-size: 1.15em;
      color: #00d4ff;
    }

    ul { list-style: none; padding: 0; margin: 0; }
    li { margin: 8px 0; font-size: 1.05em; }

    ul li::before {
      content: "‚Ä¢ ";
      color: #00d4ff;
      font-weight: bold;
      margin-right: 6px;
    }

    /* Centrado del menu y entidades */
    #menu .content,
    #entidades .content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;
      gap: 8px;
    }

    /* Fondo solo para la portada */
    .portada {
      background: url("portada.jpg") no-repeat center center fixed;
      background-size: cover; /* Para que cubra toda la pantalla */
      color: white; /* Texto blanco para que contraste */
      text-shadow: 2px 2px 5px black; /* Mejor visibilidad del texto */
    }


    
    /* Responsivo peque√±o */
    @media (max-width:600px) {
      .menu-btn, .entity-btn { padding: 10px 18px; font-size: .95rem; }
      .slide { padding: 18px; font-size: .95rem; }
    }
  </style>
</head>
<body>
  <!-- Men√∫ principal -->
  <section class="slide active portada" id="menu" role="region" aria-labelledby="menu-title">
    <div class="content">
      <h2 id="menu-title">Camino hacia el terrorüõ£Ô∏èüíÄ</h2>

      <button class="menu-btn" onclick="goToSlide('requisitos')">Requisitos</button>
      <button class="menu-btn" onclick="goToSlide('entidades')">Entidades y Atributos</button>
      <button class="menu-btn" onclick="goToSlide('esquema')">Esquema</button> 
    </div>
  </section>

  <!-- Requisitos -->
  <section class="slide" id="requisitos" role="region" aria-labelledby="req-title">
    <div class="content">
      <h2 id="req-title">Requisitos</h2>

      <div class="requisito-detalle">
        <h3>Entidad: Peaje</h3>
        <ul>
          <li>Identificador √∫nico del peaje.</li>
          <li>Nombre oficial del peaje.</li>
          <li>Tipo de mecanismo de cobro.</li>
          <li>Ubicaci√≥n geogr√°fica exacta del peaje.</li>
          <li>Fecha en la que el peaje entr√≥ en operaci√≥n.</li>
          <li>Cantidad de carriles que tiene el peaje.</li>
        </ul>
      </div>

      <div class="requisito-detalle">
        <h3>Entidad: Ubicaci√≥n</h3>
        <ul>
          <li>Identificador √∫nico de la ubicaci√≥n.</li>
          <li>Departamento en el que se encuentra el peaje.</li>
          <li>Municipio donde est√° localizado el peaje.</li>
          <li>Ruta nacional (c√≥digo, nombre).</li>
          <li>Nombre del corredor vial en el que est√° ubicado.</li>
        </ul>
      </div>

      <div class="requisito-detalle">
        <h3>Entidad: Concesi√≥n Vial</h3>
        <ul>
          <li>Identificador √∫nico de la concesi√≥n vial.</li>
          <li>Nombre oficial de la concesi√≥n.</li>
          <li>C√≥digo oficial del contrato de concesi√≥n.</li>
          <li>Instituci√≥n responsable de otorgar la concesi√≥n.</li>
          <li>Fecha inicio - fin del contrato.</li>
        </ul>
      </div>

      <div class="requisito-detalle">
        <h3>Entidad: Categor√≠a Vehicular</h3>
        <ul>
          <li>Identificador √∫nico de la categor√≠a.</li>
          <li>C√≥digo de la categor√≠a vehicular.</li>
          <li>N√∫mero de ejes del veh√≠culo.</li>
          <li>Norma que define la categor√≠a vehicular.</li>
          <li>Variante o divisiones dentro de la categor√≠a.</li>
          <li>Notas adicionales relevantes de la categor√≠a.</li>
        </ul>
      </div>

      <div class="requisito-detalle">
        <h3>Entidad: Tarifa</h3>
        <ul>
          <li>Identificador √∫nico de la tarifa.</li>
          <li>Valor por categor√≠a.</li>
          <li>Fecha de inicio - fin de la tarifa.</li>
          <li>Indica si existe una tarifa diferencial.</li>
          <li>Condici√≥n por la cual aplica la tarifa diferencial.</li>
          <li>Factor de ajuste de la tarifa.</li>
          <li>Porcentaje aplicado en el ajuste de la tarifa.</li>
        </ul>
      </div>

      <div class="requisito-detalle">
        <h3>Entidad: Hist√≥rico de Tarifas</h3>
        <ul>
          <li>Identificador √∫nico del registro hist√≥rico.</li>
          <li>Periodo (fecha inicio, fecha finalizaci√≥n).</li>
          <li>Valor de la tarifa en ese periodo (por categor√≠a).</li>
          <li>Norma / resoluci√≥n que fij√≥ la tarifa.</li>
        </ul>
      </div>
    </div>

    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('menu')">‚¨Ö Volver al Men√∫</button>
    </div>
  </section>

  <!-- Entidades -->
  <section class="slide" id="entidades" role="region" aria-labelledby="ent-title">
    <div class="content">
      <h2 id="ent-title">Entidades</h2>
      <button class="entity-btn" onclick="goToSlide('peaje')">Peaje</button>
      <button class="entity-btn" onclick="goToSlide('ubicacion')">Ubicaci√≥n</button>
      <button class="entity-btn" onclick="goToSlide('concesion')">Concesi√≥n Vial</button>
      <button class="entity-btn" onclick="goToSlide('categoria')">Categor√≠a Vehicular</button>
      <button class="entity-btn" onclick="goToSlide('tarifa')">Tarifa</button>
      <button class="entity-btn" onclick="goToSlide('historico')">Hist√≥rico Tarifas</button>
    </div>
    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('menu')">‚¨Ö Volver al Men√∫</button>
    </div>
  </section>

  <!-- Diapositivas de cada entidad -->
  <section class="slide" id="peaje">
    <div class="content">
      <h2>üèó Entidad: Peaje</h2>
      <ul>
        <li>ID_peaje</li>
        <li>Nombre</li>
        <li>Tipo (manual, electr√≥nico, mixto)</li>
        <li>Coordenadas (latitud, longitud)</li>
        <li>Fecha inicio operaci√≥n</li>
        <li>N¬∞ carriles</li>
      </ul>
    </div>
    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('entidades')">‚¨Ö Volver a Entidades</button>
    </div>
  </section>

  <section class="slide" id="ubicacion">
    <div class="content">
      <h2>üìçüó∫Ô∏è Entidad: Ubicaci√≥n</h2>
      <ul>
        <li>ID_ubicaci√≥n</li>
        <li>Departamento</li>
        <li>Municipio</li>
        <li>Ruta nacional (c√≥digo, nombre)</li>
        <li>Corredor vial</li>
      </ul>
    </div>
    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('entidades')">‚¨Ö Volver a Entidades</button>
    </div>
  </section>

  <section class="slide" id="concesion">
    <div class="content">
      <h2>üè¢ Entidad: Concesi√≥n Vial</h2>
      <ul>
        <li>ID_concesi√≥n</li>
        <li>Nombre concesi√≥n</li>
        <li>Tipo_concesi√≥n(Privada/P√∫blica)</li>
        <li>Contrato (N¬∞ contrato, entidad_contratante, fecha inicio-fin)</li>
      </ul>
    </div>
    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('entidades')">‚¨Ö Volver a Entidades</button>
    </div>
  </section>

  <section class="slide" id="categoria">
    <div class="content">
      <h2>üöó Entidad: Categor√≠a Vehicular</h2>
      <ul>
        <li>ID_categoria</li>
        <li>N¬∞ categor√≠a(I-VII)</li>
        <li>N¬∞ ejes</li>
        <li>Resoluci√≥n (N¬∫, a√±o)</li>
        <li>Subcategor√≠as</li>
        <li>Observaciones</li>
      </ul>
    </div>
    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('entidades')">‚¨Ö Volver a Entidades</button>
    </div>
  </section>

  <section class="slide" id="tarifa">
    <div class="content">
      <h2>üí∞ Entidad: Tarifa</h2>
      <ul>
        <li>ID_tarifa</li>
        <li>Valor por categor√≠a (I-VII)</li>
        <li>Fecha vigencia (inicio, finalizaci√≥n)</li>
        <li>Tarifa diferencial (Aplica / No aplica)</li>
        <li>Criterio diferencial (residencia, placa)</li>
        <li>Criterio ajuste</li>
        <li>Porcentaje incremento</li>
      </ul>
    </div>
    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('entidades')">‚¨Ö Volver a Entidades</button>
    </div>
  </section>

  <section class="slide" id="historico">
    <div class="content">
      <h2>üìä Entidad: Hist√≥rico Tarifas</h2>
      <ul>
        <li>ID_hist√≥rico</li>
        <li>Periodo (fecha inicio, fecha finalizaci√≥n)</li>
        <li>Valor(por categor√≠a)</li>
        <li>Resoluci√≥n tarifa</li>
      </ul>
    </div>
    <div class="footer">
      <button class="menu-btn" onclick="goToSlide('entidades')">‚¨Ö Volver a Entidades</button>
    </div>
  </section>



  <section class="slide" id="esquema">
    <div class="content">
     <h2>Modelo Entidad-Relaci√≥n</h2>

    <!-- Imagen clickeable -->
     <img src="er.png" alt="Modelo ER" class="zoom-img"
       style="max-width: 90%; max-height: 500px; border-radius: 15px;
             box-shadow: 0 0 15px rgba(0,0,0,0.6); background: #fff; padding: 10px; cursor:pointer;">
    </div>

    <div class="footer">
       <button class="menu-btn" onclick="goToSlide('menu')">‚¨Ö Volver al Men√∫</button>
    </div>
  </section>

    <!-- ========== LIGHTBOX (pegar en lugar del bloque actual) ========== -->
  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <span class="close" onclick="closeLightbox()" role="button" aria-label="Cerrar">&times;</span>
    <div class="lightbox-overlay">
      <img id="lightbox-img" class="lightbox-content" src="" alt="Imagen ampliada">
    </div>
  </div>

  <style>
  /* Lightbox - estilos */
  .lightbox {
    display: none;
    position: fixed;
    z-index: 2000;
    padding: 20px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.95);
    overflow: hidden; /* manejamos pan/zoom por JS */
  }

  .lightbox-container {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: default;
    overflow: hidden;
  }

  .lightbox-overlay {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* La imagen se transformar√° (translate + scale). 
    Ponemos transform-origin en 0 0 para facilitar el c√°lculo del pan relativo. */
  .lightbox-content {
    transition: transform 0.08s linear;
    transform-origin: 0 0;
    max-width: none;
    max-height: none;
    user-select: none;
    -webkit-user-drag: none;
    cursor: grab;
  }
  .lightbox-content:active { cursor: grabbing; }

  .close {
    position: absolute;
    top: 12px;
    right: 18px;
    color: #fff;
    font-size: 38px;
    font-weight: 700;
    line-height: 1;
    cursor: pointer;
    z-index: 2010;
  }
  .close:hover { color: #ff7777; }
  </style>

  <script>
  /* Lightbox: open on click for all images with class .zoom-img,
    zoom with wheel, drag to pan, double-click to reset. */

  let scale = 1;
  let isDragging = false;
  let startX = 0, startY = 0, translateX = 0, translateY = 0;

  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');

  // openLightbox: muestra y resetea transformaciones
  function openLightbox(src) {
    lightboxImg.src = src;
    scale = 1;
    translateX = 0;
    translateY = 0;
    updateTransform();
    lightbox.style.display = 'block';
    lightbox.setAttribute('aria-hidden','false');
    // focus para accesibilidad / permitir cerrar con ESC
    document.body.style.overflow = 'hidden';
  }

  // closeLightbox
  function closeLightbox() {
    lightbox.style.display = 'none';
    lightbox.setAttribute('aria-hidden','true');
    document.body.style.overflow = '';
  }

  // Bind click on all images with class .zoom-img (your ER image)
  document.querySelectorAll('.zoom-img').forEach(img => {
    img.style.cursor = 'zoom-in';
    img.addEventListener('click', (e) => {
      openLightbox(e.currentTarget.src);
    });
  });

  // Close when clicking outside the image (on overlay)
  lightbox.addEventListener('click', function(e) {
    if (e.target.classList.contains('lightbox-overlay')) {
      closeLightbox();
    }
  });

  // Close with ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeLightbox();
  });

  /* --- Wheel zoom --- 
    We compute a focal adjustment so the point under the cursor remains roughly stable. */
  lightbox.addEventListener('wheel', function(e) {
    if (lightbox.style.display !== 'block') return;
    e.preventDefault();

    // scale step
    const delta = (e.deltaY < 0) ? 0.12 : -0.12;
    const newScale = Math.min(4, Math.max(0.3, scale + delta)); // clamp

    // compute pointer relative to image (consider current transform)
    const rect = lightboxImg.getBoundingClientRect();
    // coordinates of pointer relative to image top-left
    const pointerX = e.clientX - rect.left;
    const pointerY = e.clientY - rect.top;

    // translate the image so pointer stays under cursor after scale change
    // convert pointer to image-space before scale
    const imgSpaceX = (pointerX - translateX) / scale;
    const imgSpaceY = (pointerY - translateY) / scale;

    translateX -= imgSpaceX * (newScale - scale);
    translateY -= imgSpaceY * (newScale - scale);

    scale = newScale;
    updateTransform();
  }, { passive: false });

  /* --- Drag to pan (mousedown on image, move on document, up to stop) --- */
  lightboxImg.addEventListener('mousedown', function(e) {
    if (lightbox.style.display !== 'block') return;
    isDragging = true;
    startX = e.clientX - translateX;
    startY = e.clientY - translateY;
    lightboxImg.style.cursor = 'grabbing';
    e.preventDefault();
  });
  document.addEventListener('mousemove', function(e) {
    if (!isDragging) return;
    translateX = e.clientX - startX;
    translateY = e.clientY - startY;
    updateTransform();
  });
  document.addEventListener('mouseup', function() {
    isDragging = false;
    lightboxImg.style.cursor = 'grab';
  });

  /* Prevent the browser drag image default (ghost image) */
  lightboxImg.ondragstart = () => false;

  /* Double click to reset zoom/position */
  lightboxImg.addEventListener('dblclick', function() {
    scale = 1; translateX = 0; translateY = 0;
    updateTransform();
  });

  /* Update CSS transform */
  function updateTransform() {
    lightboxImg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
  }
  </script>
  <!-- ========== END LIGHTBOX ========== -->



  <script>
    // recoger slides y establecer √≠ndice actual
    const slides = Array.from(document.querySelectorAll('.slide'));
    let currentIndex = slides.findIndex(s => s.classList.contains('active'));
    if (currentIndex === -1) {
      currentIndex = 0;
      slides[0].classList.add('active');
    }

    // funci√≥n para cambiar slide (con logs para debug)
    function goToSlide(id) {
      const targetIndex = slides.findIndex(s => s.id === id);
      console.log('Intentando ir a slide:', id, '-> index', targetIndex);
      if (targetIndex === -1) {
        console.warn('Slide no encontrado:', id);
        return;
      }

      slides.forEach((slide, idx) => {
        slide.classList.toggle('active', idx === targetIndex);
        slide.classList.toggle('prev', idx < targetIndex);
        slide.classList.toggle('next', idx > targetIndex);
      });

      currentIndex = targetIndex;
    }

    // flechas del teclado
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') {
        const next = (currentIndex + 1) % slides.length;
        goToSlide(slides[next].id);
      } else if (e.key === 'ArrowLeft') {
        const prev = (currentIndex - 1 + slides.length) % slides.length;
        goToSlide(slides[prev].id);
      }
    });

    // debug: mostrar cu√°ntos slides y cu√°l est√° activo al cargar
    console.log('Slides encontrados:', slides.length, 'currentIndex:', currentIndex, 'id activo:', slides[currentIndex].id);
  </script>
</body>
</html>
